<div class="wrapper">
  <ng-container *appSkeleton="isLoading; skeletonTemplate: skeleton">
    <div class="nav-bar">
      <div class="btn back" (click)="closeDetails()"><i class="material-icons icon">close</i></div>
      <div class="btn world"><i class="material-icons icon">public</i>World</div>
      <div class="btn country">
        <div class="flag-icon" [ngStyle]="{'background-image': 'url(' + countryFlag + ')'}"></div>
        {{ countryName }}
      </div>
    </div>
    <div class="header">
      <div class="country-title">
        <div class="country-name">{{ countryName }}</div>
        <div class="country-updated-date">
          Updated on
          {{ countryCovidHistory.lastUpdated | date: 'MMM d, y, h:mm:ss a'}}
        </div>
      </div>
      <div class="country-today-info">
        <app-case-block
          [name]="'New Cases'"
          [value]="todayNewCases | number"
        ></app-case-block>
        <app-case-block
          [name]="'New Deaths'"
          [value]="todayNewDeaths | number"
        ></app-case-block>
      </div>
    </div>
    <div class="content">
      <div class="general-info">
        <app-case-block
          [name]="'Population'"
          [value]="population | number"
        ></app-case-block>
        <app-case-block
          [name]="'Total Cases'"
          [value]="totalCases | number"
        ></app-case-block>
        <app-case-block
          [name]="'Active Cases'"
          [value]="activeCases | number"
        ></app-case-block>
        <app-case-block
          [name]="'Deaths'"
          [value]="totalDeaths | number"
        ></app-case-block>
        <app-case-block
          [name]="'Recoveries'"
          [value]="recoveries | number"
        ></app-case-block>
        <app-case-block
          [name]="'People Vaccinated'"
          [value]="peopleVaccinated | number"
         ></app-case-block>
        <app-case-block
          [name]="'Case Per Million'"
          [value]="casePerMillion"
        ></app-case-block>
        <app-case-block
          [name]="'Deaths Per Million'"
          [value]="deathsPerMillion"
        ></app-case-block>
        <app-case-block
          [name]="'Fatality Rate'"
          [value]="fatalityRate"
        ></app-case-block>
      </div>
      <div class="charts">
        <div class="charts-header">
          Line Chart: Infected
          <i *ngIf="!basicCountryData.infected"
             class="material-icons"
             [appTooltip]="getTooltipText('infected')"
          >
            info
          </i>
        </div>
        <plotly-plot [data]="getDataForPredictionLinePlot()" [layout]="getLayoutForPredictionLinePlot('Prediction')"
        ></plotly-plot>
        <div class="charts-header">
          Bar Chart: Infected | Vaccinated | Recovered
          <i *ngIf="!basicCountryData.infected"
             class="material-icons"
             [appTooltip]="getTooltipText('infected')"
          >
            info
          </i>
        </div>
        <plotly-plot [data]="getFirstChartsData()" [layout]="getLayoutForPredictionLinePlot('Infected | Vaccinated | Recovered')"
        ></plotly-plot>

        <div class="charts-header">
          Bar Chart: Dead | Sick
          <i *ngIf="!basicCountryData.infected"
             class="material-icons"
             [appTooltip]="getTooltipText('infected')"
          >
            info
          </i>
        </div>
        <plotly-plot [data]="getSecondChartsData()" [layout]="getLayoutForPredictionLinePlot('Dead | Sick')"
        ></plotly-plot>`
      </div>
    </div>
  </ng-container>
</div>

<ng-template #skeleton>
  <app-skeleton-country-details></app-skeleton-country-details>
</ng-template>
